"use strict";function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _possibleConstructorReturn(t,e){return!e||"object"!==_typeof(e)&&"function"!=typeof e?_assertThisInitialized(t):e}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_setPrototypeOf(t,e)}function _setPrototypeOf(t,e){return(_setPrototypeOf=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),t}var Ajax=function(){function t(){_classCallCheck(this,t)}return _createClass(t,null,[{key:"get",value:function(t,e,n){var o=new XMLHttpRequest;o.open("GET",t,!0),o.onreadystatechange=function(){4===o.readyState&&(200===o.status?e(o.responseText):n&&n(o.status,o.statusText))},o.send()}},{key:"post",value:function(t,e,n,o){var i=new XMLHttpRequest;i.open("POST",t,!0),i.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),i.onreadystatechange=function(){4===i.readyState&&(200===i.status?n(i.responseText):o&&o(i.status,i.statusText))};var r=[];for(var s in e)r.push(s+"="+encodeURIComponent(e[s]));i.send(r.join("&"))}},{key:"postMultiPart",value:function(t,e,n,o){var i=new XMLHttpRequest;i.open("POST",t,!0),i.onreadystatechange=function(){4===i.readyState&&(200===i.status?n(i.responseText):o&&o(i.status,i.statusText))},i.send(e)}}]),t}(),Module=function(){function t(e){_classCallCheck(this,t),this.selector=e}return _createClass(t,[{key:"get",value:function(t){return this.container.querySelector(t)}},{key:"getAll",value:function(t){return Array.prototype.slice.call(this.container.querySelectorAll(t))}},{key:"init",value:function(){this.container=document.querySelector(this.selector),this.onComponentsLoading(),this.onBindEvents(),this.onCreate()}},{key:"onCreate",value:function(){}},{key:"onComponentsLoading",value:function(){}},{key:"onBindEvents",value:function(){}}]),t}(),Page=function(){function t(e){_classCallCheck(this,t),this.modules=[],this.contentview=e}return _createClass(t,[{key:"registerModule",value:function(t){this.modules.push(t)}},{key:"init",value:function(){}},{key:"loadView",value:function(t){var e=this;Ajax.get("/views/".concat(t,".html"),function(t){e.content=t,e.onContentLoaded()})}},{key:"onContentLoaded",value:function(){this.contentview.innerHTML=this.content,this.modules.forEach(function(t){return t.init()})}}]),t}(),Router=function(){function t(e){_classCallCheck(this,t),this.mainhash=e,this.routes=[],this._contentview=null}return _createClass(t,[{key:"addRoute",value:function(t,e){this.routes.push({hash:t,controller:e})}},{key:"getHash",value:function(){return window.location.hash||this.mainhash}},{key:"run",value:function(){var t=this,e=this.routes.filter(function(e){return e.hash===t.getHash()});0===e.length||(this.activeRoute=e[0],this.page=new this.activeRoute.controller(this._contentview),this.page.init())}},{key:"contentview",set:function(t){this._contentview=t}}]),t}(),MainModel=function(){function t(){_classCallCheck(this,t),this.data=[],t.inst=this}return _createClass(t,[{key:"add",value:function(t){this.data.push(t)}},{key:"getAll",value:function(){return this.data}}],[{key:"instance",value:function(){return console.log(t.inst),t.inst?t.inst:t.inst=new t}}]),t}(),AboutController=function(t){function e(){return _classCallCheck(this,e),_possibleConstructorReturn(this,_getPrototypeOf(e).apply(this,arguments))}return _inherits(e,t),_createClass(e,[{key:"init",value:function(){this.loadView("aboutUs")}}]),e}(Page),ContactsController=function(t){function e(){return _classCallCheck(this,e),_possibleConstructorReturn(this,_getPrototypeOf(e).apply(this,arguments))}return _inherits(e,t),_createClass(e,[{key:"init",value:function(){this.loadView("contacts")}}]),e}(Page),MainController=function(t){function e(){return _classCallCheck(this,e),_possibleConstructorReturn(this,_getPrototypeOf(e).apply(this,arguments))}return _inherits(e,t),_createClass(e,[{key:"init",value:function(){this.registerModule(new HelloModule(".hello")),this.loadView("main")}}]),e}(Page),HelloModule=function(t){function e(){return _classCallCheck(this,e),_possibleConstructorReturn(this,_getPrototypeOf(e).apply(this,arguments))}return _inherits(e,t),_createClass(e,[{key:"onComponentsLoading",value:function(){this.model=MainModel.instance(),this.button=this.get("button"),this.content=this.get(".content")}},{key:"onBindEvents",value:function(){var t=this;console.log(this.button),this.button.addEventListener("click",function(){return t.addLine()})}},{key:"onCreate",value:function(){this.redraw()}},{key:"redraw",value:function(){var t=this,e=this.model.getAll();this.content.innerHTML="",e.forEach(function(e){t.content.insertAdjacentHTML("beforeEnd",'<div class="tag">'.concat(e,"</div>"))})}},{key:"addLine",value:function(){this.model.add("hello"),this.redraw()}}]),e}(Module),App=function(){function t(){_classCallCheck(this,t),this.router=new Router("#/main"),this.router.addRoute("#/main",MainController),this.router.addRoute("#/contacts",ContactsController),this.router.addRoute("#/about",AboutController)}return _createClass(t,[{key:"run",value:function(){this.router.contentview=document.querySelector(".contentView"),this.router.run()}},{key:"start",value:function(){var t=this;window.addEventListener("load",function(){return t.run()}),window.addEventListener("hashchange",function(){return t.run()})}}]),t}(),app=new App;app.start();